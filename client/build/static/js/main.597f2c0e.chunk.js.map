{"version":3,"sources":["components/navbar.module.css","domains/auth/auth.state.js","components/button.jsx","hooks/use-id.js","components/field-context.js","components/field.jsx","components/label.jsx","lib/call-all.js","components/text-input.jsx","components/text-field.jsx","domains/auth/components/login-form.jsx","domains/auth/components/logout-button.jsx","components/navbar.jsx","components/layout.jsx","domains/auth/components/register-form.jsx","domains/userProfile/components/userprofile-form.jsx","pages/user-profile.jsx","App.js","index.js"],"names":["module","exports","ACCESS_TOKEN_STORAGE","storedAccessToken","localStorage","getItem","AUTH_DEFAULT_STATE","status","accessToken","AuthContext","createContext","authReducer","state","event","type","Error","AuthProvider","children","auth","useReducer","dispatch","login","logout","useAuthState","Provider","value","useAuth","useContext","useRegister","username","email","password","fetch","method","headers","accept","body","JSON","stringify","then","res","ok","json","Promise","reject","register","useLogin","Button","variant","render","props","className","cn","classByVariant","primary","outline","currentId","FieldContext","React","displayName","Field","fieldId","ensuredId","providedId","String","useId","Label","htmlFor","callAll","fns","args","forEach","fn","TextInput","forwardedRef","onChangeValue","id","onChange","ev","target","ref","TextField","label","inputProps","LoginForm","statusInit","message","setEmail","setPassword","setStatus","onSubmit","preventDefault","token","setItem","catch","console","log","statusText","data","errors","name","autoFocus","required","disabled","to","LogoutButton","removeItem","useLogout","onClick","NavBar","classes","header","logo","Layout","RegisterForm","setUsername","history","useHistory","push","UserProfileForm","company","setCompany","department","setDepartment","designation","setDesignation","setIsLoading","mystatus","setMystatus","ab","AbortController","loadProfile","signal","Accept","Authorization","getProfile","abort","updateProfile","UserProfile","App","path","exact","ReactDOM","document","querySelector"],"mappings":"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","file":"static/js/main.597f2c0e.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"navbar_header__1OM8g\",\"logo\":\"navbar_logo__2Cm66\",\"active\":\"navbar_active__3weRW\",\"badge\":\"navbar_badge__3C7Og\"};","import { createContext, useReducer, useContext } from \"react\";\n\nconst ACCESS_TOKEN_STORAGE = \"auth\";\n// const BASE_URL = \"http://localhost:5000\"\n// const BASE_URL = \"https://ecomm-service.herokuapp.com\"\nconst BASE_URL = \"api\";\n\nconst storedAccessToken = localStorage.getItem(ACCESS_TOKEN_STORAGE);\n\nconst AUTH_DEFAULT_STATE = storedAccessToken\n  ? {\n      status: \"authenticated\",\n      accessToken: storedAccessToken,\n    }\n  : {\n      status: \"anonymous\",\n      accessToken: null,\n    };\n\nconst AuthContext = createContext();\n\nconst authReducer = (state, event) => {\n  switch (event.type) {\n    case \"login\":\n      return {\n        accessToken: event.accessToken,\n        status: \"authenticated\",\n      };\n\n    case \"logout\":\n      return {\n        accessToken: null,\n        status: \"anonymous\",\n      };\n\n    default:\n      throw new Error(`Unsupported event type ${event.type} in authReducer`);\n  }\n};\n\nexport const useAuthState = () => {\n  const [state, dispatch] = useReducer(authReducer, AUTH_DEFAULT_STATE);\n\n  const login = (accessToken) =>\n    dispatch({\n      type: \"login\",\n      accessToken,\n    });\n\n  const logout = () =>\n    dispatch({\n      type: \"logout\",\n    });\n\n  return {\n    ...state,\n    login,\n    logout,\n  };\n};\n\nexport const AuthProvider = ({ children }) => {\n  const auth = useAuthState();\n\n  return <AuthContext.Provider value={auth}>{children}</AuthContext.Provider>;\n};\n\nexport const useAuth = () => {\n  const auth = useContext(AuthContext);\n\n  if (!auth) {\n    throw new Error(\"Your application must be wrapped with AuthProvider\");\n  }\n\n  return auth;\n};\n\nconst login = (email, password) =>\n  // fetch(\"https://ecomm-service.herokuapp.com/login\", {\n  fetch(`${BASE_URL}/login`, {\n    method: \"POST\",\n    headers: {\n      accept: \"application/json\",\n      \"Content-Type\": \"application/json\",\n    },\n    body: JSON.stringify({\n      email,\n      password,\n    }),\n  })\n  .then((res) => {\n    if (res.ok) {\n      return res.json();\n    }\n    return Promise.reject(res)\n    // throw new Error(res.statusText);\n  })\n\n\nconst register = (username, email, password) =>\n  fetch(`${BASE_URL}/register`, {\n    method: \"POST\",\n    headers: {\n      accept: \"application/json\",\n      \"Content-Type\": \"application/json\",\n    },\n    body: JSON.stringify({\n      username,\n      email,\n      password,\n    }),\n  })\n  .then((res) => {\n    if (res.ok) {\n      return res.json();\n    }\n    return Promise.reject(res)\n    // throw new Error(res.statusText);\n  })\n\n\nexport const useRegister = () => {\n  const auth = useContext(AuthContext);\n\n  if (!auth) {\n    throw new Error(\"Your application must be wrapped with AuthProvider\");\n  }\n\n  // const login = useLogin();\n\n  return function invokeRegister({ username, email, password }) {\n    return register(username, email, password)          \n  };\n};\n\nexport const useLogin = () => {\n  const auth = useContext(AuthContext);\n\n  if (!auth) {\n    throw new Error(\"Your application must be wrapped with AuthProvider\");\n  }\n\n  return function invokeLogin({ email, password }) {\n    return login(email, password)\n  };\n};\n\nexport const useLogout = () => {\n  const auth = useContext(AuthContext);\n\n  if (!auth) {\n    throw new Error(\"Your application must be wrapped with AuthProvider\");\n  }\n\n  return () => {\n    auth.logout();\n    localStorage.removeItem(ACCESS_TOKEN_STORAGE);\n    localStorage.removeItem(\"page\");\n  };\n};\n","import cn from \"classnames\";\nimport PropTypes from \"prop-types\";\n\nexport const Button = ({ type = \"button\", variant, render, ...props }) => {\n  const className = cn(\n    \"inline-flex justify-center items-center py-2 px-4 border shadow-sm text-sm font-medium rounded-md focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-pink-500\",\n    variant && classByVariant[variant],\n    props.className\n  );\n\n  if (render) {\n    return render({\n      className,\n      ...props,\n    });\n  }\n\n  return <button type={type} {...props} className={className} />;\n};\n\nconst classByVariant = {\n  primary: \"border-transparent text-white bg-pink-600 hover:bg-pink-700\",\n  outline: \"border-pink-500 text-pink-500 bg-white hover:text-pink-700\",\n};\n\nButton.propTypes = {\n  variant: PropTypes.oneOf([\"primary\", \"outline\"]),\n  render: PropTypes.func,\n};\n","import * as React from \"react\";\n\nlet currentId = 0;\n\nexport const useId = (providedId) => {\n  const [id] = React.useState(() => providedId || String(currentId++));\n  return id;\n};\n","import * as React from \"react\";\n\nexport const FieldContext = React.createContext();\nFieldContext.displayName = \"FieldContext\";\n","import { useId } from \"../hooks/use-id\";\nimport { FieldContext } from \"./field-context\";\n\nexport const Field = ({ fieldId, children }) => {\n  const ensuredId = useId(fieldId);\n\n  return (\n    <FieldContext.Provider value={ensuredId}>\n      <div className=\"space-y-1\">{children}</div>\n    </FieldContext.Provider>\n  );\n};\n","import cn from \"classnames\";\nimport * as React from \"react\";\nimport { FieldContext } from \"./field-context\";\n\nexport const Label = (props) => {\n  const fieldId = React.useContext(FieldContext);\n\n  return (\n    <label\n      htmlFor={fieldId}\n      {...props}\n      className={cn(\"block text-sm font-medium text-gray-900\", props.className)}\n    />\n  );\n};\n","export function callAll(...fns) {\n  return function callAllFns(...args) {\n    fns.forEach((fn) => typeof fn === \"function\" && fn(...args));\n  };\n}\n","import cn from \"classnames\";\nimport PropTypes from \"prop-types\";\nimport * as React from \"react\";\nimport { callAll } from \"../lib/call-all\";\nimport { FieldContext } from \"./field-context\";\n\n/**\n * Unspecified props will be spreaded to the underlying `input` element.\n *\n * Provided ref will be forwarded to the underlying `input` element.\n */\nexport const TextInput = React.forwardRef(function TextInput(\n  { type = \"text\", onChangeValue, ...props },\n  forwardedRef\n) {\n  const fieldId = React.useContext(FieldContext);\n\n  return (\n    <input\n      type={type}\n      {...props}\n      id={props.id || fieldId}\n      className={cn(\n        \"block w-full shadow-sm sm:text-sm focus:ring-pink-500 focus:border-pink-500 border-gray-300 rounded-md\",\n        props.className\n      )}\n      onChange={callAll(\n        onChangeValue && ((ev) => onChangeValue(ev.target.value)),\n        props.onChange\n      )}\n      ref={forwardedRef}\n    />\n  );\n});\n\nTextInput.propTypes = {\n  onChangeValue: PropTypes.func,\n};\n","import PropTypes from \"prop-types\";\nimport * as React from \"react\";\nimport { Field } from \"./field\";\nimport { Label } from \"./label\";\nimport { TextInput } from \"./text-input\";\n\n/**\n * `<TextField />` composed of `<Label />` and `<TextInput />` component.\n *\n * Unspecified props will be forwarded to the underlying `<TextInput />` element.\n *\n * `ref` will be forwarded to `<TextInput />` element.\n */\nexport const TextField = React.forwardRef(function TextField(\n  { label, id, ...inputProps },\n  ref\n) {\n  return (\n    <Field fieldId={id}>\n      {label && <Label>{label}</Label>}\n      <TextInput {...inputProps} ref={ref} />\n    </Field>\n  );\n});\n\nTextField.propTypes = {\n  label: PropTypes.node,\n};\n","import { Button } from \"../../../components/button\";\nimport { TextField } from \"../../../components/text-field\";\nimport * as React from \"react\";\nimport { useLogin, useAuth} from \"../auth.state\";\nimport { Link } from \"react-router-dom\";\n\nconst ACCESS_TOKEN_STORAGE = \"auth\";\n\nexport const LoginForm = () => {\n  const statusInit = { message: \"\", status: \"idle\" };\n  const [email, setEmail] = React.useState(\"\");\n  const [password, setPassword] = React.useState(\"\");\n  const [status, setStatus] = React.useState(statusInit);\n  const login = useLogin();\n  const auth = useAuth();\n\n  return (\n    <div className=\"max-w-md mx-auto m-6 shadow\">\n      <form\n        onSubmit={(ev) => {\n          ev.preventDefault();\n          setStatus({ ...status, status: \"loading\" });\n          login({ email, password })\n            .then((res) => {\n              auth.login(res.token);\n              localStorage.setItem(ACCESS_TOKEN_STORAGE, res.token);\n              setStatus(statusInit);\n            })\n            .catch((res) => {\n              console.log(res.status, res.statusText);\n              res.json().then((data) => {\n                console.log(data);\n                setStatus({ message: data.errors, status: \"errors\" });\n              });\n            });\n        }}\n        className=\"p-6\"\n      >\n        {status.status === \"errors\" && (\n          <div className=\"p-2 text-red-800 bg-red-200 rounded-sm\">\n            {status.message}\n          </div>\n        )}\n        <div className=\"text-3xl mt-4 mb-8 font-extrabold text-center\">\n          Login\n        </div>\n        <div className=\"space-y-6\">\n          <TextField\n            label=\"Email\"\n            value={email}\n            onChangeValue={setEmail}\n            name=\"username\"\n            id=\"username\"\n            autoFocus\n            required\n            disabled={status.status === \"loading\"}\n          />\n          <TextField\n            label=\"Password\"\n            value={password}\n            onChangeValue={setPassword}\n            name=\"password\"\n            id=\"password\"\n            type=\"password\"\n            required\n            disabled={status.status === \"loading\"}\n          />\n          <Button\n            type=\"submit\"\n            variant=\"primary\"\n            className=\"w-full\"\n            disabled={status.status === \"loading\"}\n          >\n            Login\n          </Button>\n        </div>\n      </form>\n      <div className=\"text-xl m-5  font-bold text-center\">\n        <Link\n          className=\"underline text-center text-md leading-relaxed text-pink-500\"\n          to={`/register`}\n        >\n          Register\n        </Link>\n      </div>\n    </div>\n  );\n};\n","import { Button } from \"../../../components/button\";\nimport { useLogout, useAuth } from \"../auth.state\";\n\nexport const LogoutButton = () => {\n  const logout = useLogout();\n  const { status } = useAuth();\n\n  return status === \"anonymous\" ? null : (\n    <Button variant=\"primary\" onClick={logout}>\n      Logout\n    </Button>\n  );\n};\n","import { Link } from 'react-router-dom';\nimport { useContext } from 'react';\nimport { LogoutButton } from \"../domains/auth\";\n\nimport classes from './navbar.module.css';\n\nexport const NavBar = () => {\n  \n  return (\n    <header className={classes.header}>\n      <div className={classes.logo}>BackendDev Homeworks Day2</div>\n      <nav>\n        <ul>\n          <li>\n            <Link to='/'>User Profile</Link>\n          </li>\n          {/* <li>\n            <Link to='/collections'>My Collections              \n            <span className={classes.badge}>\n                {collectionsCtx.totalCollections}\n              </span>\n              </Link>\n          </li> */}\n          <li>\n            <LogoutButton />\n          </li>\n        </ul>\n      </nav>\n    </header>\n  );\n}\n","import { NavBar } from './navbar';\nimport { useAuth } from \"../domains/auth\";\nimport { Redirect} from 'react-router-dom';\n\nexport const Layout = (props) => {\n\n  const auth = useAuth();\n\n  return (\n\n    <div>\n      { auth.status === \"authenticated\"? <NavBar /> : <Redirect to = \"/\" />}\n      <main >{props.children}</main>\n    </div>\n  );\n}\n\n","import { Button } from \"../../../components/button\";\nimport { TextField } from \"../../../components/text-field\";\nimport * as React from \"react\";\nimport { useRegister, useLogin } from \"../auth.state\";\nimport { useHistory, Link } from \"react-router-dom\";\nimport { useAuth } from \"../auth.state\";\n\nconst ACCESS_TOKEN_STORAGE = \"auth\";\n\nexport const RegisterForm = () => {\n  const statusInit = { message: \"\", status: \"idle\" };\n  const [username, setUsername] = React.useState(\"\");\n  const [email, setEmail] = React.useState(\"\");\n  const [password, setPassword] = React.useState(\"\");\n  const [status, setStatus] = React.useState(statusInit);\n\n  const auth = useAuth();\n  const login = useLogin();\n  const register = useRegister();\n  const history = useHistory();\n\n  return (\n    <div className=\"max-w-md mx-auto m-10 shadow\">\n      <form\n        onSubmit={(ev) => {\n          ev.preventDefault();\n          setStatus({ ...status, status: \"loading\" });\n\n          register({ username, email, password })\n            .then((res) => {\n              login({ email, password }).then((res) => {\n                auth.login(res.token);\n                localStorage.setItem(ACCESS_TOKEN_STORAGE, res.token);\n                setStatus(statusInit);\n              });\n              history.push(\"/\");\n            })\n            .catch((res) => {\n              console.log(res.status, res.statusText);\n              res.json().then((data) => {\n                console.log(data);\n                setStatus({ message: data.errors, status: \"errors\" });\n              });\n            });\n        }}\n        className=\"p-6\"\n      >\n        {status.status === \"errors\" && (\n          <div className=\"p-2 text-red-800 bg-red-200 rounded-sm\">\n            {status.message}\n          </div>\n        )}\n        <div className=\"text-3xl mt-4 mb-8 font-extrabold text-center\">\n          Register User\n        </div>\n        <div className=\"space-y-6\">\n          <TextField\n            label=\"Username\"\n            value={username}\n            onChangeValue={setUsername}\n            name=\"username\"\n            id=\"username\"\n            autoFocus\n            required\n            disabled={status.status === \"loading\"}\n          />\n          <TextField\n            label=\"Email\"\n            value={email}\n            onChangeValue={setEmail}\n            name=\"email\"\n            id=\"email\"\n            autoFocus\n            required\n            disabled={status.status === \"loading\"}\n          />\n          <TextField\n            label=\"Password\"\n            value={password}\n            onChangeValue={setPassword}\n            name=\"password\"\n            id=\"password\"\n            type=\"password\"\n            required\n            disabled={status.status === \"loading\"}\n          />\n          <Button\n            type=\"submit\"\n            variant=\"primary\"\n            className=\"w-full\"\n            disabled={status.status === \"loading\"}\n          >\n            Register\n          </Button>\n        </div>\n      </form>\n      <div className=\"text-xl m-5  font-bold text-center\">\n        <Link\n          className=\"underline text-center text-md leading-relaxed text-pink-500\"\n          to={`/`}\n        >\n          Back to Homepage\n        </Link>\n      </div>\n    </div>\n  );\n};\n","import { Button } from \"../../../components/button\";\nimport { TextField } from \"../../../components/text-field\";\nimport * as React from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport { useAuth } from \"../../auth\";\nimport { load } from \"dotenv\";\n\n// const BASE_URL = \"http://localhost:5000\";\nconst BASE_URL = \"api\";\n\nconst updateProfile = (token, { company, department, designation }) =>\n  fetch(`${BASE_URL}/user-details`, {\n    method: \"POST\",\n    headers: {\n      accept: \"application/json\",\n      \"Content-Type\": \"application/json\",\n      Authorization: `Bearer ${token}`,\n    },\n    body: JSON.stringify({\n      company,\n      department,\n      designation,\n    }),\n  })\n  .then((res) => {\n    if (res.ok) {\n      return res.json();\n    }\n    return Promise.reject(res)\n    // throw new Error(res.statusText);\n  })\n\nconst getProfile = (token, signal) =>\n  fetch(`${BASE_URL}/user-details`, {\n    method: \"GET\",\n    headers: {\n      Accept: \"application/json\",\n      \"Content-Type\": \"application/json\",\n      Authorization: `Bearer ${token}`,\n    },\n    signal,\n  })\n  .then((res) => {\n    if (res.ok) {\n      return res.json();\n    }\n    return Promise.reject(res)\n    // throw new Error(res.statusText);\n  })\n\nexport const UserProfileForm = () => {\n  const statusInit = { message: \"\", status: \"idle\" };\n  const [company, setCompany] = React.useState(\"\");\n  const [department, setDepartment] = React.useState(\"\");\n  const [designation, setDesignation] = React.useState(\"\");\n  const [isLoading, setIsLoading] = React.useState(false);\n  const [mystatus, setMystatus] = React.useState(statusInit);\n  const history = useHistory();\n  const auth = useAuth();\n  const ab = new AbortController();\n\n  const loadProfile = (token, signal) => {\n    setIsLoading(true);\n    getProfile(token, signal).then((data) => {\n        const { company, department, designation } = data;\n        setCompany(company);\n        setDepartment(department);\n        setDesignation(designation);\n      setIsLoading(false);\n    })\n    .catch((res) => {\n      console.log(res.status, res.statusText);\n      res.json().then((data) => {\n        console.log(data);\n        setMystatus({ message: data.errors, status: \"errors\" });\n      });\n    });\n\n  }\n  \n  React.useEffect(() => {\n    if (auth.status !== \"authenticated\") {\n      return;\n    }\n    const token = localStorage.getItem(\"auth\");\n    loadProfile(token, ab.signal);\n    return () => {\n      ab.abort();\n    };\n  }, [auth]);\n\n  return (\n    <div className=\"max-w-md mx-auto m-10 shadow\">\n      <form\n        onSubmit={(ev) => {\n          ev.preventDefault();\n          setMystatus({ ...mystatus, status: \"loading\" });\n          if (auth.status === \"authenticated\") {\n            const token = localStorage.getItem(\"auth\");\n            updateProfile(token, { company, department, designation })\n            .then((data) => {\n                const { company, department, designation } = data;\n                setCompany(company);\n                setDepartment(department);\n                setDesignation(designation);\n                setMystatus({ ...mystatus, status: \"idle\" });\n                history.push(\"/\");\n              })\n            .catch((res) => {\n                console.log(res.status, res.statusText);\n                res.json().then((data) => {\n                  console.log(data);\n                  setMystatus({ message: data.errors, status: \"errors\" });\n                });\n              })\n            }\n          }\n        }\n\n        className=\"p-6\"\n      >\n        {\n          mystatus.status === \"errors\" && (\n          <div className=\"p-2 text-red-800 bg-red-200 rounded-sm\">\n            {mystatus.message}\n          </div>\n          )\n        }\n        <div className=\"space-y-6\">\n          <TextField\n            label=\"Company\"\n            value={company}\n            onChangeValue={setCompany}\n            name=\"company\"\n            id=\"company\"\n            autoFocus\n            required\n            disabled={mystatus.status === \"loading\"}\n          />\n          <TextField\n            label=\"Department\"\n            value={department}\n            onChangeValue={setDepartment}\n            name=\"department\"\n            id=\"department\"\n            autoFocus\n            required\n            disabled={mystatus.status === \"loading\"}\n          />\n          <TextField\n            label=\"Designation\"\n            value={designation}\n            onChangeValue={setDesignation}\n            name=\"designation\"\n            id=\"designation\"\n            required\n            disabled={mystatus.status === \"loading\"}\n          />\n          <Button\n            type=\"submit\"\n            variant=\"primary\"\n            className=\"w-full\"\n            disabled={mystatus.status === \"loading\"}\n          >\n            Update\n          </Button>\n        </div>\n      </form>\n    </div>\n  )\n}\n","import { LoginForm, useAuth} from \"../domains/auth\";\nimport * as React from \"react\";\nimport { UserProfileForm } from \"../domains/userProfile/components/userprofile-form\";\n\n\nexport const UserProfile = () => {\n  const auth = useAuth();\n\n  return (\n\n    <>\n      {\n        auth.status === \"anonymous\" &&\n        <main className=\"bg-gray-50 p-6 sm:p-12 min-h-screen\">\n          <div className=\"max-w-7xl mx-auto pt-16 pb-24 px-4 sm:px-6 lg:px-8\">\n            <LoginForm />\n          </div>\n        </main>\n      }\n      {\n      auth.status === \"authenticated\" &&\n\n    <main className=\"bg-gray-50 lg:flex\">\n\n      <div className=\"flex-1\">\n        <div className=\"max-w-7xl mx-auto pt-10 pb-24 px-4 sm:px-6 lg:px-8\">\n          <div className=\"sm:flex sm:flex-col sm:align-center\">\n            <h1 className=\"text-5xl font-extrabold text-pink-700 sm:text-center\">\n              User Profile\n            </h1>\n          </div>\n\n            {/* =============== product li end ============  */}\n        <div>\n            <UserProfileForm />\n        </div>\n          {/*  =============== product ul end ============ */}\n        </div>\n      </div>\n\n    </main>\n  }\n\n</>\n  );\n};\n","import { Route, Switch } from 'react-router-dom';\nimport { Layout } from './components/layout';\nimport { RegisterForm } from \"./domains/auth/components/register-form\"\nimport { UserProfile } from \"./pages/user-profile\";\n\n\n\nfunction App() {\n  return (\n    <Layout >\n      <Switch>\n        <Route path='/' exact>\n          <UserProfile />\n        </Route>\n        {/* <Route path='/collections'>\n          <CollectionsPage />\n        </Route>\n        <Route path='/movie/:id'>\n          <MoviesDetail />\n        </Route> */}\n        <Route path='/register'>\n          <RegisterForm />\n        </Route>\n      </Switch>\n    </Layout>\n  );\n}\n\nexport default App;\n","import * as React from \"react\";\nimport * as ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport { BrowserRouter } from 'react-router-dom';\nimport App from './App';\n// import { CollectionsContextProvider } from './domains/gallery';\nimport { AuthProvider } from \"./domains/auth\";\n\nReactDOM.render(\n  <AuthProvider>\n\n      <BrowserRouter>\n        <App />\n      </BrowserRouter>\n  </AuthProvider>,\n  document.querySelector(\"#root\")\n);\n"],"sourceRoot":""}